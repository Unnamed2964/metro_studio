# 贡献指南

感谢你对 RailMap 项目的关注。我们欢迎任何形式的贡献，包括但不限于代码提交、问题报告、功能建议、文档改进等。

## 报告问题

提交 Issue 前，请先搜索现有的 Issue，确认问题是否已被报告。

### Bug 报告

Bug 报告请包含以下信息：

- **问题描述**：清晰简洁地描述问题
- **复现步骤**：详细的操作步骤
- **预期行为**：你期望发生什么
- **实际行为**：实际发生了什么
- **环境信息**：
  - 浏览器名称和版本
  - 操作系统
  - RailMap 版本（如有）
- **截图或录屏**：如适用，提供视觉证据
- **附加信息**：任何有助于定位问题的信息

### 功能建议

功能建议请包含以下信息：

- **问题描述**：简明扼要地描述你希望实现的功能
- **使用场景**：这个功能解决了什么问题，在什么场景下使用
- **期望行为**：详细描述你期望的功能如何工作
- **替代方案**：是否考虑过其他解决方案，为什么选择这个方案
- **附加信息**：截图、原型设计等任何有助于理解建议的信息

## 提交代码

### 开发流程

1. Fork 本仓库到你的 GitHub 账号
2. Clone 你的 Fork：`git clone https://github.com/your-username/railmap.git`
3. 创建新的分支：`git checkout -b feature/your-feature-name`
4. 进行开发
5. 提交更改：`git commit -m "描述你的更改"`
6. 推送到你的 Fork：`git push origin feature/your-feature-name`
7. 在 GitHub 上创建 Pull Request

### 分支命名

使用清晰的分支命名约定：

- `feature/` - 新功能
- `fix/` - Bug 修复
- `refactor/` - 代码重构
- `docs/` - 文档更新
- `test/` - 测试相关
- `chore/` - 构建/工具链相关

示例：
- `feature/ai-station-naming`
- `fix/schematic-layout-bug`
- `docs/update-readme`

### 提交信息

使用清晰的提交信息格式：

```
<类型>: <简短描述>

<详细描述（可选）>
```

类型可以是：
- `feat`: 新功能
- `fix`: Bug 修复
- `docs`: 文档更新
- `style`: 代码格式（不影响功能）
- `refactor`: 重构（不是新功能也不是 Bug 修复）
- `perf`: 性能优化
- `test`: 测试相关
- `chore`: 构建/工具链相关

示例：
```
feat: add AI station naming support

Integrate OpenAI-compatible API for automatic station
name generation based on nearby geographic features.
```

### 代码规范

#### Vue 组件

- 使用 Composition API
- 组件文件使用 PascalCase 命名
- Props 定义清晰，包含类型和默认值
- 使用 `<script setup>` 语法

#### JavaScript/代码风格

- 使用有意义的变量和函数命名
- 函数保持单一职责
- 避免深层嵌套
- 添加必要的注释说明复杂逻辑

#### 文档

- 代码变更必须同步更新对应目录的 README.md
- 新增功能需要更新主 README.md
- 复杂逻辑需要添加行内注释

### 提交前检查

在提交 PR 前，请确保：

1. 代码通过本地构建：`npm run build`
2. 代码风格符合项目规范
3. 所有必要的文档已更新
4. PR 描述清晰说明了更改内容

## Pull Request 流程

### PR 描述

好的 PR 描述应该包含：

- **更改概述**：简明扼要地说明这个 PR 做了什么
- **更改原因**：为什么需要这个更改
- **测试情况**：你是如何测试这个更改的
- **相关 Issue**：关联的 Issue 编号（如有）
- **截图**：如果是 UI 相关的更改，提供截图对比

### PR 检查清单

提交 PR 后，请确认：

- [ ] 代码通过构建检查
- [ ] 所有测试通过（如有）
- [ ] 文档已更新
- [ ] PR 描述清晰完整
- [ ] 没有引入不必要的依赖
- [ ] 没有破坏现有功能

### 代码审查

所有 PR 都需要经过代码审查。审查者可能会：

- 提出改进建议
- 请求代码澄清
- 要求添加测试
- 建议文档改进

请积极回应审查意见，及时修改代码。如果有不同意见，请在讨论中友好沟通。

## 设计规范

### 用户体验

RailMap 的核心用户是轨道交通爱好者，设计决策应优先考虑：

- **直觉性**：操作应该符合用户的直觉，不需要说明书
- **流畅性**：编辑过程应该流畅，没有卡顿和延迟
- **反馈性**：每个操作都应该有清晰的视觉反馈
- **容错性**：撤销/重做功能可靠，误操作可以轻松恢复

### 性能

- 地图渲染需要保持 60fps
- 自动排版算法不应阻塞主线程
- 大量站点（1000+）的编辑仍然流畅

### 可访问性

- 支持键盘快捷键
- 颜色对比度符合 WCAG 标准
- 重要功能不依赖鼠标操作

## 文档规范

### README 更新

任何影响用户使用的功能变更都需要更新 README.md：

- 新增功能：在"核心特性"部分添加描述
- 行为变更：更新"使用指南"部分
- 配置变更：更新"快速开始"部分

### 目录 README

每个主要目录都应该有 README.md 说明：

- 目录的用途
- 主要模块和文件
- 使用示例（如适用）
- 注意事项

### 代码注释

- 复杂算法需要详细注释
- 非显而易见的业务逻辑需要说明
- TODO 标记应该包含简要说明

## 获取帮助

如果你在贡献过程中遇到问题：

1. 查看 [GitHub Issues](https://github.com/your-username/railmap/issues) 是否有类似问题
2. 在 Issue 中提问，描述清楚你的问题和尝试过的解决方案
3. 耐心等待维护者的回应

## 行为准则

在参与 RailMap 项目时，请遵守以下原则：

- 尊重所有参与者
- 接受建设性批评
- 关注对项目最有利的事情
- 对不同的观点持开放态度

## 许可证

通过贡献代码到 RailMap，你同意你的贡献将遵循项目的 GPL-3.0 许可证。

---

再次感谢你的贡献！
